## 第3章: 応用編

### 高度なプロンプト技術
この章では、より複雑なタスクに対応するための高度なプロンプト技術を学びます。

### 1. Zero-shotプロンプティング
Zero-shotプロンプティングは、例示なしで直接タスクを実行する手法です。

#### 基本的なZero-shot
```
以下の文章を「ポジティブ」「ネガティブ」「中立」のいずれかに分類してください：

テキスト：この映画は普通でした。
感情：
```

#### Zero-shotの限界
- 複雑なタスクでは精度が低下
- 文脈理解が必要な場合は不適切
- 特殊な知識が必要な場合は不向き

### 2. Few-shotプロンプティング
Few-shotプロンプティングは、少数の例を示してタスクを実行する手法です。

#### 基本的なFew-shot
```
テキスト：素晴らしい映画でした！
感情：ポジティブ

テキスト：全く面白くなかった。
感情：ネガティブ

テキスト：この映画は普通でした。
感情：
```

#### Few-shotの効果的な使用法
1. **適切な例の選択**
   - タスクを代表する例
   - バランスの取れた例
   - 明確な対応関係

2. **フォーマットの一貫性**
   - 統一された形式
   - 明確な区切り
   - 一貫したラベル付け

### 3. Chain-of-Thought（CoT）プロンプティング
CoTは、推論過程を段階的に示す手法です。

#### 基本的なCoT
```
質問：りんごが10個あります。3個食べて、2個を友達にあげました。その後5個買い足しました。残りは何個ですか？

考え方：
1. 最初のりんご：10個
2. 食べた分：-3個
3. 友達にあげた分：-2個
4. 買い足した分：+5個
5. 計算：10 - 3 - 2 + 5 = 10個

答え：10個
```

#### Zero-shot CoT
複雑な問題に対して「一歩ずつ考えていきましょう」という指示を加えることで、モデルの推論能力を引き出します。

```
質問：1000円で買い物をして、消費税10%を含めると1100円になります。税抜価格はいくらですか？

一歩ずつ考えていきましょう。
```

### 4. 自己整合性（Self-Consistency）
複数の推論パスを生成し、最も一貫性のある答えを選択する手法です。

#### 実装手順
1. 同じ問題に対して複数の推論を生成
2. 各推論パスから答えを抽出
3. 最も頻出する答えを採用

#### 例：数学の問題解決
```
質問：私が6歳の時、妹は私の半分の年齢でした。今私は70歳です。妹は何歳ですか？

推論パス1：
1. 私が6歳の時、妹は3歳
2. 私と妹の年齢差は3歳
3. 私が70歳なので、妹は67歳

推論パス2：
1. 私が6歳→妹3歳
2. 年齢差は3歳
3. 70歳の時の妹は67歳

推論パス3：
1. 6歳の時の妹は3歳
2. 現在の年齢差も3歳
3. 70 - 3 = 67歳
```

### 5. 知識生成プロンプティング
タスク実行前に関連知識を生成し、それを活用する手法です。

#### 手順
1. **知識生成**
   ```
   トピック：ゴルフのスコア計算
   必要な知識を生成してください：
   ```

2. **知識の統合**
   ```
   質問：ゴルフは高得点を目指すスポーツですか？
   
   知識：ゴルフは最小のストローク数（打数）でホールを回ることを目指すスポーツです。
   各ホールの打数が得点となり、合計得点が少ないプレイヤーが勝利します。
   
   回答：
   ```

### プロンプト最適化のベストプラクティス
1. **タスクの分解**
   - 複雑な問題を小さなステップに分割
   - 各ステップの目的を明確化
   - 段階的な指示の提供

2. **コンテキストの最適化**
   - 必要十分な情報の提供
   - 関連する例の適切な選択
   - 明確な制約条件の設定

3. **フィードバックの活用**
   - 結果の評価と分析
   - プロンプトの継続的な改善
   - エラーパターンの特定と対応

### まとめ
高度なプロンプト技術を使いこなすことで、より複雑なタスクや精度の要求される場面でも適切な結果を得ることができます。状況に応じて適切な技術を選択し、必要に応じて組み合わせることで、AIの能力を最大限に引き出すことが可能です。
